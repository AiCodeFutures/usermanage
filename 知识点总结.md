# 项目模块使用总结

以下以清单模式，简要说明本项目中各核心模块的作用及简单示例。

## FastAPI

- 核心介绍：高性能 Python Web 框架，简化 RESTful API 开发。
- 知识点清单：
  - 路由定义：使用装饰器 `@app.get`、`@app.post` 等
  - 请求/响应模型：Pydantic `BaseModel` 自动校验
  - 异常处理：`HTTPException` 状态码与错误消息反馈
- 示例：

  ```python
  from fastapi import FastAPI, HTTPException

  app = FastAPI()
  ```

- 扩展思考
  - 什么是 HTTP 方法（GET/POST/PUT/DELETE），它们各自的典型用途是什么？
  - 有哪些 Http 状态吗， 最常用的有哪些， 代表什么意思
  - 为什么要用 Pydantic 的 BaseModel 定义请求和响应模型？它能帮我们自动做哪些校验？
  - 什么是装饰器， 使用装饰器的优点
  - 这里的路由是什么意思
  - 如何在路由函数中获取路径参数、查询参数和请求体？它们在 URL 中分别长什么样？
  - 当客户端传了不合法的数据时，FastAPI 会如何响应？我们如何自定义错误信息？
  - 为什么要用 Uvicorn（或其他 ASGI 服务器）来运行 FastAPI？它和 Flask 用的 WSGI 有何区别？
  - FastAPI 中如何抛出一个带状态码的异常？HTTPException 的基本用法是什么？
  - Python 世界里 还有那些类似 FastAPI 的应用框架， FastAPI 的核心特色是什么

## Streamlit

- 核心介绍：快速搭建交互式 Web 界面，专注数据展示与用户交互。
- 知识点清单：
  - 页面配置：`st.set_page_config`
  - 布局组件：`st.sidebar`、`st.columns`
  - 表单交互：`st.form`、`st.form_submit_button`
  - 基础组件：`st.button`、`st.text_input`、`st.radio`
  - 数据展示：`st.dataframe`、`st.markdown`
  - 页面刷新：`st.rerun`
- 示例：

  ```python
  import streamlit as st

  st.title("用户管理系统")
  if st.button("添加用户"):
      st.success("用户已添加！")
  ```

## SQLite

- 核心介绍：嵌入式关系型数据库，数据存储在单个文件中，无需独立服务。
- 知识点清单：
  - 数据库初始化：检查并创建表结构（`CREATE TABLE`）
  - 连接管理：使用 `sqlite3.connect()` 获取连接对象
  - 事务控制：`conn.commit()` 提交、`conn.rollback()` 回滚
  - 结果集封装：将查询返回的元组转换为字典或对象
  - 参数化查询：使用 `?` 占位符防止 SQL 注入
- 示例：

  ```python
  import sqlite3

  conn = sqlite3.connect("users.db")
  cursor = conn.cursor()
  cursor.execute(
      "CREATE TABLE IF NOT EXISTS users (id INTEGER PRIMARY KEY, username TEXT, email TEXT)"
  )
  conn.commit()
  conn.close()
  ```

- 扩展思考
  - 为什么把 Sqlite 叫做嵌入式数据库，有什么优点 ，为什么 Sqlite 成为 Python 首选内置数据库模块
  - 如何初始化数据库连接？sqlite3.connect("file.db") 做了什么，连接对象有哪些常用方法？
  - 为什么要在创建表后调用 conn.commit()？如果不调用会发生什么？
  - 什么是数据库事务
  - 在一个事务中执行多条 SQL 语句时，何时该用 rollback()，何时该用 commit()？两者有何区别？
  - 什么是参数化查询？用 ? 占位符与直接拼接字符串的安全性差别在哪里？
  - 如何把查询结果（默认的元组）转换成字典或对象，以便用字段名访问？有哪些简单做法？
  - 当数据库文件不存在时，sqlite3.connect() 会怎样？如何优雅地检查并创建表结构？
  - cursor.fetchall()、fetchone() 和 fetchmany(size) 有什么区别？各自适用于哪些场景？
  - 如何使用 row_factory 属性，把查询结果自动映射为字典？示例代码长什么样？

## Pandas

- 核心介绍：功能丰富的数据分析与处理库，擅长表格数据操作。
- 知识点清单：
  - DataFrame 构建：`pd.DataFrame(users)`
  - 列操作：重命名 (`df.columns = [...]`)、排序 (`df.sort_values()`) 与过滤 (`df[cond]`)
  - 索引与切片：使用 `loc` 和 `iloc` 访问行列
  - 处理缺失值：`df.dropna()`、`df.fillna()`
  - 与 Streamlit 集成：`st.dataframe(df)` 美化展示
- 示例：

  ```python
  import pandas as pd

  users = database.get_all_users()
  df = pd.DataFrame(users)
  st.dataframe(df)
  ```

- 扩展思考
  - pandas 在streamlit 担当了什么角色， 为什么要使用 pandas 
  - DataFrame 与 Series 有何区别？何时使用 Series？
  - 如何选择特定的行或列？`df.loc[...], df.iloc[...]` 分别代表什么？
  - 如果数据中存在缺失值，该如何处理？示例方法有哪些？
  - 如何对数据进行分组统计？使用 `groupby` 的基本用法是什么？

## Uvicorn

- 核心介绍：轻量级 ASGI 服务器，负责启动并运行 FastAPI 应用。
- 知识点清单：
  - 启动参数：`--reload`（开发自动重载）、`--host`、`--port`
  - 日志级别：`--log-level` 设置输出详细程度
  - 生产环境：移除 `--reload`，设置合适的 `workers` 数量
  - 与反向代理：可与 Nginx 或 Traefik 配合部署
- 示例命令：

  ```bash
  uvicorn api:app --host 0.0.0.0 --port 8000 --reload
  ```

- 扩展思考
  - 什么是 ASGI 与 WSGI
  - ASGI 与 WSGI 有何区别？为何 FastAPI 需要 ASGI？
  - `--reload` 模式如何监测代码变化？它的优缺点是什么？
  - 在生产环境中，是否应该使用 `--reload`？为什么？
  - 如何通过 Uvicorn 配置多 workers？示例参数有哪些？
